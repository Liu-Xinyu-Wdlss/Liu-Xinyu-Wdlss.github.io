<!DOCTYPE html>
<html>
<head>
	<title>Tic Tac Toe with AI</title>
	<h1>「Tic Tac Toe」</h1>
	<style>
		#board {
			border-collapse: collapse;
		}

		#board td {
			border: 1px solid black;
			height: 100px;
			width: 100px;
			text-align: center;
			font-size: 50px;
			cursor: pointer;
		}

	</style>
</head>
<body>
	<table id="board">
		<tr>
			<td id="0"></td>
			<td id="1"></td>
			<td id="2"></td>

		</tr>
		<tr>
			<td id="3"></td>
			<td id="4"></td>
			<td id="5"></td>

		</tr>
		<tr>
			<td id="6"></td>
			<td id="7"></td>
			<td id="8"></td>

		</tr>
	</table>
  
	<p id="status"></p>

	<script>

		let board = ["", "", "", "", "", "", "", "", ""]; // initialize empty board
		let player = "X"; // player starts first
		let ai = "O"; // ai is the second player

		const winning_combinations = [
			[0, 1, 2],
			[3, 4, 5],
			[6, 7, 8],
			[0, 3, 6],
			[1, 4, 7],
			[2, 5, 8],
			[0, 4, 8],
			[2, 4, 6]
		];

		function is_board_full(board) {
			return board.every(cell => cell !== "");
		}

		function is_winner(player, board) {
			for (let i = 0; i < winning_combinations.length; i++) {
				let [a, b, c] = winning_combinations[i];
				if (board[a] === player && board[b] === player && board[c] === player) {
					return true;
				}
			}
			return false;
		}


		function get_random_move(board) {
			let empty_cells = [];
			for (let i = 0; i < board.length; i++) {
				if (board[i] === "") {
					empty_cells.push(i);
				}
			}

			let random_index = Math.floor(Math.random() * empty_cells.length);
			return empty_cells[random_index];
		}

		function make_move(player, index) {
			board[index] = player;
			document.getElementById(index).textContent = player;
			if (is_winner(player, board)) {
				document.getElementById("status").textContent = player + " wins!";
				disable_board();
			} 
      else if (is_board_full(board)) {
				document.getElementById("status").textContent = "Tie game!";
				disable_board();
			} 
      else {
				player = ai;
				let ai_index = get_random_move(board);
				make_move(ai, ai_index);
			  }
		}

		function disable_board() {
			for (let i = 0; i < board.length; i++) {
			document.getElementById(i).setAttribute("disabled", "disabled");
		}
	}

	document.querySelectorAll("#board td").forEach(cell => {
		cell.addEventListener("click", () => {
			if (cell.textContent === "") {
				make_move(player, parseInt(cell.id));
			}
		});
	});

</script>
</body>
</html>
